[%-
  title      = 'Publications';
  order_by   = c.request.param('order_by')   OR 'title';
  sort_order = c.request.param('sort_order') OR 'desc';
  PROCESS 'macros.tmpl';
-%]

<script>
  $(document).ready(function() {
    $('#filter-form').submit(function(e) {
        e.preventDefault();
        var url = "[% c.uri_for('/pub/list_service', { format => 'html' } ) %]&amp;filter=" +  $('#filter').val();
        $.get(url, function(html) {
            $('#pubs').html(html);
        });
    });

    $('#filter').keyup(function(event) { $('#filter-form').submit() });
    $('#filter').focus();
    $('#filter-form').submit();
  });
</script>


<div class="row-fluid">
  <div id="title" class="span4">
    <h1>[% title %]</h1>
  </div>
  <div class="text-right">
    <div class="form-group">
      <form id="filter-form" class="form-inline" role="form">
          <input type="text" class="form-control" name="filter" id="filter" value="[% c.request.param('filter') %]">
          <button type="submit" class="btn btn-default" onclick="document.getElementById('filter').value = '';document.getElementById('filter-form').submit();">Clear</button>
      </form>
    </div>
  </div>
</div>

<div id="pubs">
  <div style="text-align:center" class="well">
  Retrieving pubs...<br/>
  <img src="/static/images/loading.gif">
  </div>
</div>
